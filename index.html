<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nightmare Quest - D&D One-Shot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="app-container">
        <div class="vhs-overlay"></div>
        <header class="app-header">
            <nav class="main-nav">
                <ul>
                    <li> <a href="#" data-page="page-story" id="nav-story" role="button" tabindex="0"> <div class="icon-circle"><img src="Assets/storyicon.png" alt="Story"></div> </a> </li>
                    <li> <a href="#" data-page="page-encounters" id="nav-encounters" role="button" tabindex="0"> <div class="icon-circle"><img src="Assets/encountersicon.png" alt="Encounters"></div> </a> </li>
                    <li> <a href="#" data-page="page-maps" id="nav-maps" role="button" tabindex="0"> <div class="icon-circle"><img src="Assets/mapsicon.jpg" alt="Locations"></div> </a> </li>
                    <li> <a href="#" data-page="page-notes" id="nav-notes" role="button" tabindex="0"> <div class="icon-circle"><img src="Assets/notesicon.png" alt="Notes"></div> </a> </li>
                    <li> <a href="#" data-page="page-chat" id="nav-chat" role="button" tabindex="0"> <div class="icon-circle"><img src="Assets/chaticon.png" alt="Chat"></div> </a> </li>
                </ul>
            </nav>
        </header>

        <main>
            <section id="page-story" class="content-panel active">
                <div class="page-tabs">
                    <button class="page-tab-btn active" data-tab="story-tab-content">Story</button>
                    <button class="page-tab-btn" data-tab="session-notes-tab-content">Session Notes</button>
                </div>
                <div id="story-tab-content" class="page-tab-content-item active">
                    <div class="story-container">
                        <div class="story-sidebar">
                            <div class="story-controls"> <button id="new-act-btn" class="btn">New Act</button> <button id="new-plot-point-btn" class="btn">New Plot Point</button> <button id="new-side-quest-btn" class="btn">New Side Quest</button> </div>
                            <ul id="story-hierarchy-list" class="story-hierarchy"></ul>
                        </div>
                        <div class="story-main">
                            <div class="story-main-card">
                                <div class="story-main-title"> <input type="text" id="story-title-input" class="story-main-title-input" value="Select a note..."> <span id="side-quest-indicator" class="side-quest-icon">?</span> <span id="story-main-delete-btn" class="story-delete-btn" style="display: none;">&times;</span> <button class="bullet-toggle btn">●</button> </div>
                                <div class="story-main-content"> <div id="story-content-textarea" class="editable-textarea" contenteditable="true"></div> </div>
                                <div class="story-main-nav"> <button id="prev-note-btn" class="story-nav-arrow btn">◀</button> <button id="next-note-btn" class="story-nav-arrow btn">▶</button> </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="session-notes-tab-content" class="page-tab-content-item">
                    <div class="session-notes-grid">
                        <div class="session-note-box"> <div class="session-note-box-header"> <h3>Events and Story</h3> <button class="bullet-toggle btn">●</button> </div> <div id="session-events-story" class="editable-textarea" contenteditable="true" data-placeholder="What happened during the session?"></div> </div>
                        <div class="session-note-box"> <div class="session-note-box-header"> <h3>NPC/Characters</h3> <button class="bullet-toggle btn">●</button> </div> <div id="session-npc-characters" class="editable-textarea" contenteditable="true" data-placeholder="New characters introduced..."></div> </div>
                        <div class="session-note-box"> <div class="session-note-box-header"> <h3>World Building</h3> <button class="bullet-toggle btn">●</button> </div> <div id="session-world-building" class="editable-textarea" contenteditable="true" data-placeholder="Details about locations, lore, etc."></div> </div>
                        <div class="session-note-box"> <div class="session-note-box-header"> <h3>Misc</h3> <button class="bullet-toggle btn">●</button> </div> <div id="session-misc" class="editable-textarea" contenteditable="true" data-placeholder="Any other random thoughts..."></div> </div>
                    </div>
                    <div class="archive-notes-container"> <button id="archive-notes-btn" class="btn">Archive Notes</button> </div>
                </div>
            </section>
            
            <section id="page-encounters" class="content-panel">
                <div class="page-tabs">
                    <button class="page-tab-btn active" data-tab="encounters-tab-content">Encounters</button>
                    <button class="page-tab-btn" data-tab="creatures-tab-content">Creatures</button>
                    <button class="page-tab-btn" data-tab="players-tab-content">Players</button>
                </div>

                <div id="encounters-tab-content" class="page-tab-content-item active">
                    <div id="battles-container">
                        </div>
                </div>

                <div id="creatures-tab-content" class="page-tab-content-item">
                    <div class="library-layout">
                        <div class="library-top-panel">
                            <div class="library-controls">
                                <input type="text" id="creature-search-input" placeholder="Search Monsters...">
                                <button id="create-creature-btn" class="btn">Create Manual</button>
                                <button class="btn">Save All</button>
                            </div>
                            <div id="creatures-search-list" class="creatures-list">
                                </div>
                        </div>
                        <div class="library-saved-container">
                            <h2 class="library-saved-title">My Creatures</h2>
                            <div id="saved-creatures-list"></div>
                        </div>
                    </div>
                </div>

                <div id="players-tab-content" class="page-tab-content-item">
                     <div class="library-layout">
                        <div class="library-controls" style="align-self: flex-start;">
                            <button id="new-player-btn" class="btn">New Player</button>
                            <button id="random-player-btn" class="btn">Random</button>
                        </div>
                        <div class="library-saved-container">
                            <h2 class="library-saved-title">Party</h2>
                            <div id="saved-players-list">
                                </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="page-maps" class="content-panel">
                <div id="token-controls">
                    <div id="color-palette-new-token"></div>
                </div>
                <div class="main-container">
                    <div class="map-wrapper">
                        <div id="map-view"></div>
                    </div>
                    <div class="sidebar-wrapper">
                        <div id="map-list-container"></div>
                    </div>
                </div>
                <div id="token-context-menu" class="context-menu">
                    <div id="color-palette"></div>
                    <button id="delete-token-btn">Delete Token</button>
                </div> 
            </section>
            
            <section id="page-notes" class="content-panel">
                <div class="notes-layout"> 
                    <div class="notes-sidebar">
                        <div class="notes-controls">
                            <div> 
                                <button id="new-note-btn" class="btn">New Note</button>
                                <button id="new-sub-note-btn" class="btn">New Sub-Note</button>
                            </div>
                            <label class="edit-toggle-label">
                                <span>Edit</span>
                                <input type="checkbox" id="note-edit-toggle">
                                <span class="edit-toggle-switch"></span>
                            </label>
                        </div>
                        <ul id="notes-list"></ul>
                    </div>
                    <div class="notes-main">
                        <textarea id="note-editor" disabled></textarea>
                    </div>
                </div> 
            </section> 
            
            <section id="page-chat" class="content-panel">
                <div class="chat-layout">
                    <div class="chat-history-sidebar">
                        <h3 class="chat-history-title">History</h3>
                        <div id="chat-history-list">
                        </div>
                    </div>
                    <div class="chat-main">
                        <div id="chat-messages" class="chat-messages-container">
                        </div>
                        <div class="chat-input-area">
                            <textarea id="chat-input" placeholder="Type your message..."></textarea>
                            <button id="chat-send-btn" class="btn">Send</button>
                        </div>
                    </div>
                </div>
            </section>
            
        </main>
        
        <div id="status-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h2>Select Status Effects</h2>
                <div id="status-options-list"></div>
                <div class="modal-actions"> <button id="save-status-btn" class="btn">Save</button> <button id="close-status-btn" class="btn">Close</button> </div>
            </div>
        </div>
        
        <div id="feedback-modal" class="modal-overlay" style="display: none;">
            <div class="feedback-content">
                <p id="feedback-message"></p>
            </div>
        </div>

        <div id="player-sheet-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="sheet-header">
                    <h2 id="player-sheet-name">Character Name</h2>
                    <label class="edit-toggle-label">
                        <span>Edit</span>
                        <input type="checkbox" id="player-sheet-edit-toggle">
                        <span class="edit-toggle-switch"></span>
                    </label>
                    <button id="close-player-sheet-btn" class="btn" style="margin-left: 15px;">X</button>
                </div>
                <div id="player-sheet-body" class="player-sheet-body">
                    </div>
            </div>
        </div>

        <div id="creature-sheet-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="sheet-header">
                    <h2 id="creature-sheet-name">Creature Name</h2>
                    <div>
                        <button id="save-creature-sheet-btn" class="btn">Save</button>
                        <button id="close-creature-sheet-btn" class="btn" style="margin-left: 15px;">X</button>
                    </div>
                </div>
                <div id="creature-sheet-body" class="creature-sheet-body">
                    </div>
            </div>
        </div>
    </div>
    <script src="config.js"></script>
    <script src="app.js"></script>
    <script src="maps.js"></script>
</body>
</html>